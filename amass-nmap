import os,sys
import xml.etree.cElementTree as ET
def getSubdomain(domain):
    os.system(f"amass enum -d {domain} -o domain.txt")
    f = open("domain.txt", "r+")
    list=[]
    for x in f:
        list.append(x)
    f.close()
    return list
def discoverOpenPortsubdomain(domain):
    os.system(f" nmap {domain} -oX sub-domain.xml")
    tree = ET.parse('sub-domain.xml')
    root = tree.getroot()
    portList = []
    for host in root.findall('host'):
        ports = host.findall('ports')[0].findall('port')
        for port in ports:
            portList.append(int(port.get('portid')))
    return (portList)
# f = open("domain.txt", "r+")
# list=[]
# for x in f:
#     list.append(x)
# f.close()
def discoverOpenPortsubdomains(list=[]):
    mydict={}
    for x in list:
        print(x)
        mydict[x]=discoverOpenPortsubdomain(x)
    return mydict

def aquatone():
    os.system(f"cat domain.txt | aquatone -ports medium ") 
    return
def main():
    val=input()
    print(discoverOpenPortsubdomains(getSubdomain(val)))


if __name__ == "__main__":
    main()



